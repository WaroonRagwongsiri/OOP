@startuml OOP

' =========================
' Platform Root (GamePlatform)
' =========================
class GamePlatform {
	+name: String
	+user_list: List<User>
	+game_list: List<Game>
	+transaction_list: List<Transaction>
	+license_list: List<GameLicense>
}

' =========================
' Accounts & Roles (Inheritance)
' =========================
abstract class User {
	+id: String
	+display_name: String
	+email: String
	+verified_status: String
	+country: String
	+created_at: DateTime
	+account_status: String  ' Active/Suspended/Closed
}

class Customer {
	+wallet_balance: double
	+refund_count_30d: int
	+friends: List<User>
	+game_license_list: List<GameLicense>
	+wishlist: List<Game>
	+cart: Cart
	+payment_method_list: List<PaymentMethod>
	+transaction_list: List<Transaction>
}

class Subscriber {
	+member_tier: String
	+expires_at: DateTime
	+extra_discount_rate: double
}

class Publisher {
	+company_name: String
	+kyc_status: String
	+contact_email: String
}

abstract class Staff {
	+employee_id: String
	+permission_level: String
}

class Moderator {
	+review_queue_count: int
}

class Admin {
}

' =========================
' Catalog / Products
' =========================
class Game {
	+id: String              ' ex: G-YYYY-XXXX
	+name: String
	+description: String
	+image_url: String
	+base_price: double
	+currency: String
	+status: String          ' Draft/UnderReview/Published/Suspended/Delisted
	+age_rating: String
	+published_at: DateTime
	+sold_count: int         ' <-- track how many copies sold
	+dlc_list: List<DLC>
	+achievement_list: List<Achievement>
	+review_List: List<review>
}

class DLC {
	+dlc_id: String
	+game_id: String
	+name: String
	+price: double
}

class Achievement {
	+achievement_id: String
	+game_id: String
	+name: String
	+image: String
	+rarity: String
}

class Review {
	+id: String              ' ex: R-YYMM-XXXXXX
	+game_id: String
	+user_id: String
	+recommend: bool
	+content: String
	+status: String          ' Visible/AutoHidden/PendingModeration/Hidden/Removed
	+created_at: DateTime
	+report_list: List<ReviewReport>
}

class ReviewReport {
	+report_id: String
	+review_id: String
	+reason: String
	+reported_at: DateTime
}

' =========================
' Cart
' =========================
class Cart {
	+cart_id: String
	+cart_item_list: List<CartItem>
	+total_amount_estimate: double
	+updated_at: DateTime
}

class CartItem {
	+game_id: String
	+quantity: int
	+unit_price_estimate: double
}

' =========================
' Transaction / Order (price snapshot + status table)
' =========================
class Transaction {
	+id: String              ' ex: O-YYYYMMDD-XXXX
	+user_id: String
	+status: String          ' PendingPayment/Processing/Completed/Failed/Cancelled
	+created_at: DateTime

	+transaction_item_list: List<TransactionItem>
	+sub_total: double
	+discount_benefit_list: List<DiscountBenefit>
	+discount_total: double
	+total_price: double

	+payment_method: String
	+paid_at: DateTime
}

class TracsactionItem {
	+game_id: String
	+quantity: int
	+unit_price: double
	+final_price: double
}

' =========================
' Payment (Abstract)
' =========================
abstract class PaymentMethod {
	+method_id: String
	+status: String  ' Active/Expired/Blocked
}

class CardPayment {
	+brand: String
	+token_ref: String
}

class BankTransferQrPayment {
	+bank_name: String
	+qr_ref: String
}

class WalletPayment {
	+wallet_ref: String
}

' =========================
' Copy / License (THIS is the "copy" your professor means)
' =========================
class GameLicense {
	+license_id: String        ' ex: L-YYMM-XXXXXX
	+game_id: String
	+owner_user_id: String
	+source_transaction_id: String
	+ownership_status: String  ' Active/Suspended/Revoked
	+playtime_hours: double
	+granted_at: DateTime
}

' =========================
' Discounts / Entitlements
' =========================
abstract class DiscountBenefit {
	+benefit_id: String
	+status: String  ' Available/Reserved/Consumed/Expired
}

class CouponBenefit {
	+code: String
	+percent_off: double
	+min_spend: double
	+expires_at: DateTime
}

class CreditBenefit {
	+credit_amount: double
	+source: String  ' topup/refund/compensation
}

' =========================
' Refund
' =========================
class RefundRequest {
	+refund_id: String
	+transaction_id: String
	+requested_at: DateTime
	+status: String   ' Requested/UnderReview/Approved/Rejected/Refunded
	+reason: String
}

' =========================================================
' Relationships
' =========================================================

GamePlatform o-- User
GamePlatform o-- Game

User <|-- Staff
User <|-- Publisher
User <|-- Customer

Staff <|-- Moderator
Staff <|-- Admin

Customer o-- PaymentMethod
Customer o-- Transaction
Customer o-- GameLicense
Customer o-- Game
Customer <-- Cart
Customer <|-- Subscriber

Transaction o-- TracsactionItem
Transaction --> RefundRequest
Transaction o-- DiscountBenefit

DiscountBenefit <|-- CouponBenefit
DiscountBenefit <|-- CreditBenefit

Cart o-- CartItem

PaymentMethod <|-- CardPayment
PaymentMethod <|-- BankTransferQrPayment
PaymentMethod <|-- WalletPayment

Game o-- Review
Game o-- DLC
Game o-- Achievement

Review o-- ReviewReport

@enduml
